{% extends 'base.html' %}

{% block title %}Edit "{{ joke['title'] }}"{% endblock %}

{% block header %}
<div class="page-header">
  <h1>Edit Joke</h1>
</div>
{% endblock %}

{% block content %}
  <div class="card">
    <form method="post">
      <div class="form-group">
        <label for="title">Title</label>
        <input type="text" name="title" id="title"
          value="{{ request.form['title'] or joke['title'] }}" required readonly>
        <span class="hint">Title cannot be changed after creation.</span>
      </div>
      <div class="form-group">
        <label for="body">The Joke</label>
        <textarea name="body" id="body">{{ request.form['body'] or joke['body'] }}</textarea>
      </div>
      <div style="display:flex; gap:0.5rem; align-items:center;">
        <button type="submit" class="btn btn-primary">Save Changes</button>
        <a href="{{ url_for('jokes.viewSingle', id=joke['id']) }}" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>

  <div class="card mt-2" style="border-color: var(--color-danger); border-left: 4px solid var(--color-danger);">
    <h3 style="color: var(--color-danger); margin-bottom: 0.75rem;">Danger Zone</h3>
    <form action="{{ url_for('jokes.delete', id=joke['id']) }}" method="post">
      <button class="btn btn-danger" type="submit" onclick="return confirm('Are you sure you want to delete this joke? This cannot be undone.');">Delete This Joke</button>
    </form>
  </div>
{% endblock %}
